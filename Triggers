--TRIGGER INSERTAR CLIENTES
CREATE OR REPLACE TRIGGER INSERTAR_CLIENTES
    AFTER INSERT ON CLIENTE
        FOR EACH ROW
            DECLARE
                V_FECHA DATE;
            BEGIN
                SELECT SYSDATE INTO V_FECHA FROM DUAL;
                INSERT INTO REGISTRO_CLIENTES (DETALLE, FECHA_REG) VALUES ('SE HA INSERTADO CLIENTE RUT '||:NEW.rut_cliente,V_FECHA);
            END;

--TRIGGER BORRAR CLIENTES        
CREATE OR REPLACE TRIGGER BORRADO_CLIENTE
    BEFORE DELETE ON CLIENTE
        FOR EACH ROW
            DECLARE
                V_FECHA DATE;
            BEGIN
                SELECT SYSDATE INTO V_FECHA FROM DUAL;
                INSERT INTO REGISTRO_CLIENTES (DETALLE, FECHA_REG) VALUES ('SE HA ELIMINADO CLIENTE RUT '||:OLD.rut_cliente,V_FECHA);
            END;
            



--TRIGGER INSERTAR PLAN
CREATE OR REPLACE TRIGGER INSERTAR_PLAN
    AFTER INSERT ON PLAN_ATENCION
        FOR EACH ROW
            DECLARE
                V_FECHA DATE;
            BEGIN
                SELECT SYSDATE INTO V_FECHA FROM DUAL;
                INSERT INTO REGISTRO_PLANES (DETALLE, FECHA_REG) VALUES ('SE HA INSERTADO PLAN ID '||:NEW.id_plan,V_FECHA);
            END;

--TRIGGER BORRAR PLAN
CREATE OR REPLACE TRIGGER BORRADO_PLAN
    BEFORE DELETE ON PLAN_ATENCION
        FOR EACH ROW
            DECLARE
                V_FECHA DATE;
            BEGIN
                SELECT SYSDATE INTO V_FECHA FROM DUAL;
                INSERT INTO REGISTRO_PLANES (DETALLE, FECHA_REG) VALUES ('SE HA ELIMINADO PLAN ID '||:OLD.id_plan,V_FECHA);
            END;
